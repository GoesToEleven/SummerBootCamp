<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<link rel="stylesheet" href="02_styles.css"/>
<body>

<img class="preview" src="http://planetoftheweb.com/i/images/taquitosandcheese_tn.jpg" alt="Taquitos and Cheese">
<div class="overlay"></div>

<script>
    document.querySelector('img.preview').addEventListener('click', function (e) {
        var lowRes = e.target.src;
        var myOverlay = document.querySelector('.overlay');
        var highRes = document.createElement('img');
        var mySpinner = document.createElement('img');

        myOverlay.style.display = 'block';
        highRes.className = 'bgImg';
        highRes.src = lowRes.substr(0, lowRes.length - 7) + '.jpg';
        myOverlay.appendChild(highRes);

        mySpinner.className = 'spinner';
        mySpinner.src = 'http://planetoftheweb.com/i/images/spinner.gif';
        myOverlay.appendChild(mySpinner);

        highRes.addEventListener('load', function () {
            mySpinner.parentNode.removeChild(mySpinner);
        });

    }, false);
</script>
</body>
</html>